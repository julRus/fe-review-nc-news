{"ast":null,"code":"import _classCallCheck from\"/home/julia/northcoders/FRONTEND/fe-review-nc-news/nc-news/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/julia/northcoders/FRONTEND/fe-review-nc-news/nc-news/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/julia/northcoders/FRONTEND/fe-review-nc-news/nc-news/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/julia/northcoders/FRONTEND/fe-review-nc-news/nc-news/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/julia/northcoders/FRONTEND/fe-review-nc-news/nc-news/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import*as api from\"../api\";import ArticleCard from\"../components/subComponents/ArticleCard\";import ArticleSorter from\"../components/subComponents/ArticleSorter\";var ArticleFeeder=/*#__PURE__*/function(_React$Component){_inherits(ArticleFeeder,_React$Component);function ArticleFeeder(){var _getPrototypeOf2;var _this;_classCallCheck(this,ArticleFeeder);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ArticleFeeder)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={articles:[],isLoading:true,err:null};_this.fetchArticles=function(sort_term,topic){api.getArticles(sort_term,topic).then(function(articles){_this.setState({articles:articles,isLoading:false});}).catch(function(err){_this.setState({err:{status:err.response.status,msg:err.response.data.msg},isLoading:false});});};return _this;}_createClass(ArticleFeeder,[{key:\"render\",value:function render(){// const {\n//   user: { username }\n// } = this.props;\n// console.log(username);\nvar articles=this.state.articles;if(this.state.isLoading)return React.createElement(\"p\",{className:\"loadIndicator\"},\"Loading...\");if(this.state.err!==null)return React.createElement(React.Fragment,null,React.createElement(\"h1\",null,\"this.state.err.status\"),React.createElement(\"h2\",null,\"this.state.err.msg\"));return React.createElement(\"section\",{className:\"content\"},React.createElement(\"div\",{className:\"article_sorter\"},React.createElement(ArticleSorter,{fetchArticles:this.fetchArticles,slug:this.props.slug})),React.createElement(\"div\",{className:\"articles\"},React.createElement(\"ul\",{className:\" \"},React.createElement(\"h3\",{className:\"articles_title\"},\"ARTICLES\"),articles.map(function(article){return React.createElement(ArticleCard,{key:article.article_id,id:article.article_id,date:article.created_at,topic:article.topic,title:article.title,comments:article.comment_count});}))));}},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchArticles(null,this.props.slug);}// componentDidUpdate(prevState) {\n//   if (prevState !== this.state) {\n//     this.filterArticlesByTopic(this.props.slug);\n//   }\n// }\n// filterArticlesByTopic(slug) {\n//   if (slug) {\n//     this.setState(currentState => {\n//       const newState = {\n//         ...currentState\n//       };\n//       console.log(newState);\n//       const topics = newState.articles.filter(article => {\n//         return article.topic === slug;\n//       });\n//       const newNewState = { ...currentState, articles: [...topics] };\n//       return newNewState;\n//     });\n//   }\n// }\n// this.filterArticlesByTopic(this.props.slug)\n}]);return ArticleFeeder;}(React.Component);export{ArticleFeeder as default};","map":{"version":3,"sources":["/home/julia/northcoders/FRONTEND/fe-review-nc-news/nc-news/src/components/ArticleFeeder.jsx"],"names":["React","api","ArticleCard","ArticleSorter","ArticleFeeder","state","articles","isLoading","err","fetchArticles","sort_term","topic","getArticles","then","setState","catch","status","response","msg","data","props","slug","map","article","article_id","created_at","title","comment_count","Component"],"mappings":"+sBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,QAArB,CAEA,MAAOC,CAAAA,WAAP,KAAwB,yCAAxB,CACA,MAAOC,CAAAA,aAAP,KAA0B,2CAA1B,C,GAEqBC,CAAAA,a,uaACnBC,K,CAAQ,CACNC,QAAQ,CAAE,EADJ,CAENC,SAAS,CAAE,IAFL,CAGNC,GAAG,CAAE,IAHC,C,OA8DRC,a,CAAgB,SAACC,SAAD,CAAYC,KAAZ,CAAsB,CACpCV,GAAG,CACAW,WADH,CACeF,SADf,CAC0BC,KAD1B,EAEGE,IAFH,CAEQ,SAAAP,QAAQ,CAAI,CAChB,MAAKQ,QAAL,CAAc,CAAER,QAAQ,CAAEA,QAAZ,CAAsBC,SAAS,CAAE,KAAjC,CAAd,EACD,CAJH,EAKGQ,KALH,CAKS,SAAAP,GAAG,CAAI,CACZ,MAAKM,QAAL,CAAc,CACZN,GAAG,CAAE,CAAEQ,MAAM,CAAER,GAAG,CAACS,QAAJ,CAAaD,MAAvB,CAA+BE,GAAG,CAAEV,GAAG,CAACS,QAAJ,CAAaE,IAAb,CAAkBD,GAAtD,CADO,CAEZX,SAAS,CAAE,KAFC,CAAd,EAID,CAVH,EAWD,C,gFArEQ,CACP;AACA;AACA;AACA;AAJO,GAKCD,CAAAA,QALD,CAKc,KAAKD,KALnB,CAKCC,QALD,CAMP,GAAI,KAAKD,KAAL,CAAWE,SAAf,CACE,MAAO,0BAAG,SAAS,CAAC,eAAb,eAAP,CACF,GAAI,KAAKF,KAAL,CAAWG,GAAX,GAAmB,IAAvB,CACE,MACE,yCACE,sDADF,CAEE,mDAFF,CADF,CAMF,MACE,gCAAS,SAAS,CAAC,SAAnB,EACE,2BAAK,SAAS,CAAC,gBAAf,EACE,oBAAC,aAAD,EACE,aAAa,CAAE,KAAKC,aADtB,CAEE,IAAI,CAAE,KAAKW,KAAL,CAAWC,IAFnB,EADF,CADF,CAOE,2BAAK,SAAS,CAAC,UAAf,EACE,0BACE,SAAS,CAAC,GADZ,EAIE,0BAAI,SAAS,CAAC,gBAAd,aAJF,CAKGf,QAAQ,CAACgB,GAAT,CAAa,SAAAC,OAAO,CAAI,CACvB,MACE,qBAAC,WAAD,EACE,GAAG,CAAEA,OAAO,CAACC,UADf,CAEE,EAAE,CAAED,OAAO,CAACC,UAFd,CAGE,IAAI,CAAED,OAAO,CAACE,UAHhB,CAIE,KAAK,CAAEF,OAAO,CAACZ,KAJjB,CAKE,KAAK,CAAEY,OAAO,CAACG,KALjB,CAME,QAAQ,CAAEH,OAAO,CAACI,aANpB,EADF,CAUD,CAXA,CALH,CADF,CAPF,CADF,CA8BD,C,6DAEmB,CAClB,KAAKlB,aAAL,CAAmB,IAAnB,CAAyB,KAAKW,KAAL,CAAWC,IAApC,EACD,CAED;AACA;AACA;AACA;AACA;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;2BAhGyCrB,KAAK,CAAC4B,S,SAA5BxB,a","sourcesContent":["import React from \"react\";\nimport * as api from \"../api\";\n\nimport ArticleCard from \"../components/subComponents/ArticleCard\";\nimport ArticleSorter from \"../components/subComponents/ArticleSorter\";\n\nexport default class ArticleFeeder extends React.Component {\n  state = {\n    articles: [],\n    isLoading: true,\n    err: null\n  };\n  render() {\n    // const {\n    //   user: { username }\n    // } = this.props;\n    // console.log(username);\n    const { articles } = this.state;\n    if (this.state.isLoading)\n      return <p className=\"loadIndicator\">Loading...</p>;\n    if (this.state.err !== null)\n      return (\n        <>\n          <h1>this.state.err.status</h1>\n          <h2>this.state.err.msg</h2>\n        </>\n      );\n    return (\n      <section className=\"content\">\n        <div className=\"article_sorter\">\n          <ArticleSorter\n            fetchArticles={this.fetchArticles}\n            slug={this.props.slug}\n          />\n        </div>\n        <div className=\"articles\">\n          <ul\n            className=\"\n          \"\n          >\n            <h3 className=\"articles_title\">ARTICLES</h3>\n            {articles.map(article => {\n              return (\n                <ArticleCard\n                  key={article.article_id}\n                  id={article.article_id}\n                  date={article.created_at}\n                  topic={article.topic}\n                  title={article.title}\n                  comments={article.comment_count}\n                />\n              );\n            })}\n          </ul>\n        </div>\n      </section>\n    );\n  }\n\n  componentDidMount() {\n    this.fetchArticles(null, this.props.slug);\n  }\n\n  // componentDidUpdate(prevState) {\n  //   if (prevState !== this.state) {\n  //     this.filterArticlesByTopic(this.props.slug);\n  //   }\n  // }\n\n  fetchArticles = (sort_term, topic) => {\n    api\n      .getArticles(sort_term, topic)\n      .then(articles => {\n        this.setState({ articles: articles, isLoading: false });\n      })\n      .catch(err => {\n        this.setState({\n          err: { status: err.response.status, msg: err.response.data.msg },\n          isLoading: false\n        });\n      });\n  };\n\n  // filterArticlesByTopic(slug) {\n  //   if (slug) {\n  //     this.setState(currentState => {\n  //       const newState = {\n  //         ...currentState\n  //       };\n  //       console.log(newState);\n\n  //       const topics = newState.articles.filter(article => {\n  //         return article.topic === slug;\n  //       });\n\n  //       const newNewState = { ...currentState, articles: [...topics] };\n\n  //       return newNewState;\n  //     });\n  //   }\n  // }\n\n  // this.filterArticlesByTopic(this.props.slug)\n}\n"]},"metadata":{},"sourceType":"module"}