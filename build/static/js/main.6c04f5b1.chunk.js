(this["webpackJsonpnc-news"]=this["webpackJsonpnc-news"]||[]).push([[0],{24:function(e,t,a){e.exports=a(56)},29:function(e,t,a){},38:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),l=a.n(r),s=(a(29),a(1)),o=a(2),i=a(4),m=a(3),u=a(5),d=a(6),p=(a(38),a(8)),h=a.n(p),E="https://nc-news-julia.herokuapp.com/api",f=function(e,t){return h.a.get("".concat(E,"/articles"),{params:{topic:t,sort_by:e}}).then((function(e){return e.data.articles}))},v=function(e,t,a,n){var c=a?"/comments/".concat(n):"/articles/".concat(e);return h.a.patch("".concat(E,"/").concat(c),{inc_votes:t}).then((function(e){return e.data})).catch(console.log)},g=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a,{to:"/articles/".concat(e.id),className:"article_link"},c.a.createElement("div",{className:"article_card_container",id:e.id.toString()},c.a.createElement("div",{className:"article_container"},c.a.createElement("li",{className:"article_card"},c.a.createElement("p",{className:"article_card_date_tag"},". ",e.date),c.a.createElement("p",{className:"article_card_topic_tag"},e.topic),c.a.createElement("p",{className:"article_card_comment_tag"},e.comments," comments"),c.a.createElement("p",{className:"article_card_title"}," ",e.title))))))},b=function(e){var t=function(t,a){a(t.value,e.slug)};return c.a.createElement("form",{className:"dropdown"},c.a.createElement("p",{className:"dropdown_title"},"SORT"),c.a.createElement("label",{className:"dropdown_label"},"DATE",c.a.createElement("input",{className:"dropdown_input",type:"radio",name:"check",value:"created_at",onChange:function(a){return t(a.target,e.fetchArticles)}}))," ",c.a.createElement("br",null),c.a.createElement("label",{className:"dropdown_label"},"Comments",c.a.createElement("input",{className:"dropdown_input",type:"radio",name:"check",value:"comment_count",onChange:function(a){return t(a.target,e.fetchArticles)}})),c.a.createElement("br",null),c.a.createElement("label",{className:"dropdown_label"},"Votes",c.a.createElement("input",{className:"dropdown_input",type:"radio",name:"check",value:"votes",onChange:function(a){return t(a.target,e.fetchArticles)}})))},_=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={articles:[],isLoading:!0,err:null},a.fetchArticles=function(e,t){f(e,t).then((function(e){a.setState({articles:e,isLoading:!1})})).catch((function(e){a.setState({err:{status:e.response.status,msg:e.response.data.msg},isLoading:!1})}))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.articles;return this.state.isLoading?c.a.createElement("p",{className:"loadIndicator"},"Loading..."):null!==this.state.err?c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"this.state.err.status"),c.a.createElement("h2",null,"this.state.err.msg")):c.a.createElement("section",{className:"content"},c.a.createElement("div",{className:"article_sorter"},c.a.createElement(b,{fetchArticles:this.fetchArticles,slug:this.props.slug})),c.a.createElement("div",{className:"articles"},c.a.createElement("ul",{className:" "},c.a.createElement("h3",{className:"articles_title"},"ARTICLES"),e.map((function(e){return c.a.createElement(g,{key:e.article_id,id:e.article_id,date:e.created_at,topic:e.topic,title:e.title,comments:e.comment_count})})))))}},{key:"componentDidMount",value:function(){this.fetchArticles(null,this.props.slug)}}]),t}(c.a.Component),y=function(e){var t=e.user;return t.password?c.a.createElement(c.a.Fragment,null,c.a.createElement("nav",{className:"nav"},c.a.createElement("ul",{className:"nav_content"},c.a.createElement(d.a,{to:"/",className:"nav_link_home",id:"nav_link"},c.a.createElement("i",{className:"fa fa-home"},c.a.createElement("p",{id:"home"},"Home"))),c.a.createElement(d.a,{to:"/topics",className:"nav_link_topics",id:"nav_link"},c.a.createElement("i",{className:"fa fa-book",id:"icon"},c.a.createElement("p",{id:"topics"},"Topics"))),c.a.createElement(d.a,{to:"/socialMediaLinks",className:"nav_link_social",id:"nav_link"},c.a.createElement("i",{className:"fa fa-info",id:"icon"},c.a.createElement("p",{id:"social"},"Social"))),c.a.createElement(d.a,{to:"null",className:"nav_link_like",id:"nav_link"},c.a.createElement("i",{className:"fa fa-heart",id:"icon"},c.a.createElement("p",{id:"like"},"Like"))),c.a.createElement(d.a,{to:"/log_in",className:"nav_link_user",id:"nav_link"},c.a.createElement("i",{className:"fa fa-sign-out",id:"icon"},c.a.createElement("p",{id:"user"},t.username)))))):c.a.createElement("div",null,c.a.createElement("nav",null,c.a.createElement("ul",null,c.a.createElement(d.a,{to:"/"},"Home"),c.a.createElement(d.a,{to:"/topics"},"Topics"),c.a.createElement(d.a,{to:"/socialMediaLinks"},"SocialMediaLinks"),c.a.createElement(d.a,{to:"/sign_up"},"Sign up"),c.a.createElement(d.a,{to:"/log_in"},"Log in"))),c.a.createElement("header",null,c.a.createElement("h1",null,"Logo"),c.a.createElement("h2",null,"Description")))},O=function(e){var t=e.user;return c.a.createElement("div",null,c.a.createElement("header",null,c.a.createElement(y,{user:t})),c.a.createElement("main",{className:"article_feed"},c.a.createElement(_,{user:t})))},N=a(23),j=a(22),k=function(e){var t=e.date,a=e.author,n=e.body,r=e.votes;return c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:"comment"},c.a.createElement("div",{className:"comment_header"},c.a.createElement("p",{className:"comment_author"},a),c.a.createElement("p",{className:"comment_votes"},r),c.a.createElement("p",{className:"comment_date"},t)),c.a.createElement("p",{className:"comment_body"},n)))},C=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={hasVotedUp:!1,txt:"VOTE \ud83d\udc4d"},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{onClick:function(){return e.incrementVotes(e.props)},className:"article_votes_button"},c.a.createElement("span",{role:"img","aria-label":"thumbsUp"},this.state.txt)))}},{key:"incrementVotes",value:function(e){var t=this;console.log(e.commentId),!1===this.state.hasVotedUp?"articleVoter"===e.name?(e.displayVote(e.commentId,1,"voteChangeArticle"),v(e.id,1).then((function(e){t.setState({hasVotedUp:!0,txt:"UNVOTE \ud83d\udc4e"})}))):"comments"===e.name&&(e.displayVote(e.commentId,1,"voteChangeComment"),v(e.id,1,e.name,e.commentId).then((function(e){t.setState({hasVotedUp:!0,txt:"UNVOTE \ud83d\udc4e"})}))):"articleVoter"===e.name?(e.displayVote(e.commentId,0,"voteChangeArticle"),v(e.id,-1).then((function(e){t.setState({hasVotedUp:!1,txt:"VOTE \ud83d\udc4d"})}))):"comments"===e.name&&(e.displayVote(e.commentId,-1,"voteChangeComment"),v(e.id,-1,e.name,e.commentId).then((function(e){t.setState({hasVotedUp:!1,txt:"VOTE \ud83d\udc4d"})})))}}]),t}(c.a.Component),w=function(e){return c.a.createElement("div",null,c.a.createElement("header",null,c.a.createElement(y,{user:e.err.user})),console.log(e),c.a.createElement("h1",null,e.err.status),c.a.createElement("h2",null,e.err.msg))},S=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={comment:{username:a.props.user.username,body:""},hasCommented:!0},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement("main",null,c.a.createElement("form",{onSubmit:function(t){return e.createComment(t)}},c.a.createElement("p",{className:"post_comment_title"},"Post a Comment"),c.a.createElement("br",null),c.a.createElement("label",null,c.a.createElement("textarea",{rows:"20",cols:"20",placeholder:"Comment Content",required:!0,className:"post_comment_box",value:this.state.comment.body,onChange:function(t){return e.handleChange(t)}}))," ",c.a.createElement("br",null),c.a.createElement("button",{className:"post_comment_button"},"Submit"))))}},{key:"handleChange",value:function(e){var t=e.target.value,a=this.props.user;this.setState({comment:{username:a.username,body:t}})}},{key:"createComment",value:function(e){var t,a,n=this;e.preventDefault(),this.setState({comment:{username:null,body:""},hasCommented:!0}),(t=this.state.comment,a=this.props.article_id,h.a.post("".concat(E,"/articles/").concat(a,"/comments"),{username:t.username,body:t.body}).then((function(e){return e.data})).catch(console.log)).then((function(e){n.props.addComment(e.comment)}))}}]),t}(c.a.Component);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={article:{},comments:[],isLoading:!0,err:null,voteChangeArticle:0,voteChangeComment:0,hasCommented:!1},a.handleVoteChange=function(e,t,n){"voteChangeComment"===n?a.setState((function(a){var n=A({},a,{comments:Object(N.a)(a.comments)});return n.comments.map((function(a){e===a.comment_id&&(a.votes+=t)})),n})):a.setState({voteChangeArticle:t})},a.addComment=function(e){a.setState((function(t){var n=A({},a.sate,{comments:a.state.comments});return n.comments.unshift(e),n}))},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;if(this.state.isLoading)return c.a.createElement("p",{className:"loadIndicator"},"Loading...");if(null!==this.state.err)return c.a.createElement(w,{err:this.state.err});var t=this.state.article,a=t.title,n=t.created_at,r=t.author,l=t.votes,s=t.body,o=this.state.comments;return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",null," ",c.a.createElement(y,{user:this.props.user})),c.a.createElement("main",{className:"article"},c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("h4",{className:"article_title"},a),c.a.createElement(C,{articleVotes:this.state.article.votes,id:this.state.article.article_id,displayVote:this.handleVoteChange,name:"articleVoter"})),c.a.createElement("div",{className:"article_header"}," ",c.a.createElement("p",{className:"article_author"},r),c.a.createElement("p",{className:"article_date"},n),c.a.createElement("p",{className:"article_votes",id:"voter"},(l+this.state.voteChangeArticle).toString())),c.a.createElement("p",{className:"article_body"},s)),c.a.createElement("p",{className:"comments_title"},"Comments"),c.a.createElement("div",null,c.a.createElement("section",{className:"comment_form"},c.a.createElement(S,{user:this.props.user,article_id:this.state.article.article_id,comments:this.state.comments,addComment:this.addComment})),c.a.createElement("ul",{className:"comments"},o.map((function(t){return c.a.createElement("div",{key:t.comment_id},c.a.createElement(k,{key:t.comment_id,id:t.comment_id,author:t.author,body:t.body,date:t.created_at,votes:t.votes})," ",c.a.createElement("button",{style:{display:t.author===e.props.user.username?"block":"none"},onClick:function(){return e.deletionChecker(t.author,t.comment_id)}},"DELETE"),c.a.createElement(C,{commentVotes:t.votes,commentId:t.comment_id,displayVote:e.handleVoteChange,name:"comments"}))}))))))}},{key:"componentDidMount",value:function(){this.fetchArticle(this.props.article_id),this.fetchComments(this.props.article_id)}},{key:"fetchArticle",value:function(e){var t=this;(function(e){return h.a.get("".concat(E,"/articles/").concat(e)).then((function(e){return e.data.article}))})(e).then((function(e){t.setState({article:e,isLoading:!1})})).catch((function(e){t.setState({err:{status:e.response.status,msg:e.response.data.msg,user:t.props.user},isLoading:!1})}))}},{key:"fetchComments",value:function(e){var t=this;(function(e){return h.a.get("".concat(E,"/articles/").concat(e,"/comments")).then((function(e){return e.data.comments}))})(e).then((function(e){t.setState({comments:e,isLoading:!1})})).catch((function(a){t.setState({err:{status:400,msg:"cannot get article of id ".concat(e,", does not exist"),user:t.props.user},isLoading:!1})}))}},{key:"deletionChecker",value:function(e,t){(console.log(t),e===this.props.user.username)&&(window.confirm("Are you sure you want to delete this comment?")?(!function(e,t){h.a.delete("".concat(E,"/comments/").concat(t))}(0,t),this.deletedComment(t)):alert("deletion cancelled"))}},{key:"deletedComment",value:function(e){var t=this;this.setState((function(a){return{comments:t.state.comments.filter((function(t){return e!==t.comment_id}))}}))}}]),t}(c.a.Component),I=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",null,c.a.createElement(y,{user:this.props.user})),c.a.createElement("main",null,c.a.createElement("form",null,"SIGN UP ",c.a.createElement("br",null),c.a.createElement("label",null,"Username",c.a.createElement("input",{type:"text"})))))}}]),t}(c.a.Component),x=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",null,c.a.createElement(y,{user:this.props.user})),c.a.createElement("main",null,c.a.createElement("form",null,"LogIn ",c.a.createElement("br",null),c.a.createElement("label",null,"Username",c.a.createElement("input",{type:"text"}))," ",c.a.createElement("br",null),c.a.createElement("label",null,"Password",c.a.createElement("input",{type:"password"}))," ",c.a.createElement("br",null),c.a.createElement("button",null,"Log In")),c.a.createElement(I,{user:this.props.user})))}}]),t}(c.a.Component),T=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={topics:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",null,c.a.createElement(y,{user:this.props.user})),c.a.createElement("main",{className:"topics"},this.state.topics.map((function(e){return c.a.createElement(d.a,{className:"topic_link",to:"/topic/articles",state:{slug:e.slug,desc:e.description}},c.a.createElement("li",{className:"topic_card",id:e.slug,key:e.slug},c.a.createElement("div",{className:"topic_tag"}," ",c.a.createElement("p",{id:"topic_slug"},e.slug),c.a.createElement("p",{id:"topic_dec"},e.description))))}))))}},{key:"componentDidMount",value:function(){var e=this;h.a.get("".concat(E,"/topics")).then((function(e){return e.data.topics})).then((function(t){e.setState({topics:t})}))}}]),t}(c.a.Component),U=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.location.state,t=e.slug,a=e.desc;return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",null,c.a.createElement(y,{user:this.props.user})),c.a.createElement("main",null,c.a.createElement("section",null,c.a.createElement("div",{className:"Topic",id:"".concat(this.slug,"_articles")},c.a.createElement("p",{id:"topic_articles_slug"},t),c.a.createElement("p",{id:"topic_articles_desc"},a)),c.a.createElement(_,{slug:t}))))}}]),t}(c.a.Component),D=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={user:{username:"jessjelly",password:"abc123"}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement("header",null,c.a.createElement(d.b,null,c.a.createElement(O,{path:"/",user:this.state.user}),c.a.createElement(L,{path:"/articles/:article_id",user:this.state.user}),c.a.createElement(S,{path:"/post_comment",user:this.state.user}),c.a.createElement(T,{path:"/topics",user:this.state.user}),c.a.createElement(U,{path:"/topic/articles",user:this.state.user}),c.a.createElement(x,{path:"/log_in",user:this.state.user}),c.a.createElement(I,{path:"/sign_up",user:this.state.user}),c.a.createElement(w,{err:{status:404,msg:"Route not found",user:this.state.user},default:!0}))))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.6c04f5b1.chunk.js.map